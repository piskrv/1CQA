#language: ru

@tree

Функционал: <описание фичи>

Как <Роль> я хочу
<описание функционала> 
чтобы <бизнес-эффект>   

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: <описание сценария>
#language: ru
@tree

Функционал: <описание фичи>

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Подготовка данных

	// Документ.ЗаказКлиента

	И я проверяю или создаю для документа "ЗаказКлиента" объекты:
		| 'Ссылка'                                                                | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'НомерЗаказа' | 'ДатаЗаказа'          | 'ФИО'  | 'НомерТелефона' | 'Грузополучатель'                                                            | 'Контрагент'                                                             | 'СтатусДокумента'                      | 'СуммаДокумента' | 'КаналСбыта'                                   | 'ПлановаяДатаДоставки' | 'Комментарий' | 'Ответственный'                                                           | 'КодКартыЛояльности' | 'Оплачено' | 'ТипЗаказа'                              | 'ДатаИзменения'       | 'SRLF' | 'SRLB' | 'АдресДоставки' | 'ПолученАптекой' | 'ДатаОкончанияРезерва' | 'ДатаРезерва'         | 'ДатаСозданияЗаказаНаСайте' | 'ПредельнаяДатаВыполнения' | 'СуммаОнлайнОплаты' | 'КодСлужбыДоставки' | 'КлиентскаяСтоимостьДоставки' | 'ПолнаяСтоимостьДоставки' | 'ДатаУпаковки'       | 'КомментарийСпециалиста' | 'ДатаОнлайнЧека'     | 'НомерОнлайнЧека' | 'КодСотрудникаФармакопейка' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80f8e0db550a29d511efff6251a48b58' | 'False'           | '00009477543' | '12.03.2025 22:52:03' | 'False'    | '7376050'     | '12.03.2025 22:52:03' | 'Анна' | '7(951)4219795' | 'e1cib/data/Справочник.Грузополучатели?ref=80eae0db550a29d411ec0164cc4781fd' | 'e1cib/data/Справочник.Контрагенты?ref=80e9c81f66ea90e211e75584df30bf92' | 'Enum.СтатусыЗаказовКлиентов.Завершен' | 1098             | 'e1cib/data/Справочник.КаналСбыта?refName=WWW' | '01.01.0001 0:00:00'   | ''            | 'e1cib/data/Справочник.Пользователи?ref=80cce0db55014f2711e81473bf81ef05' | '9999001329238'      | 'False'    | 'Enum.ТипыЗаказовКлиентов.РезервВАптеке' | '13.03.2025 14:27:00' | 1      | 8      | ''              | 'True'           | '16.03.2025 8:52:28'   | '12.03.2025 22:52:18' | '12.03.2025 22:50:50'       | '15.03.2025 22:50:50'      |                     | ''                  |                               |                           | '13.03.2025 8:51:25' | ''                       | '01.01.0001 0:00:00' | ''                | ''                          |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                | 'НоменклатураВнешняя'                                                            | 'ЦенаПоставщика' | 'Цена' | 'ЦенаСоСкидкой' | 'Количество' | 'Сумма' | 'Отменено' | 'ПричинаОтмены' | 'ИсходнаяХарактеристика' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80f8e0db550a29d511efff6251a48b58' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80e9e0db550a29d411eb71b06c1dd1df' | 154.56           | 549    |                 | 2            | 1098    | 'False'    | ''              | '2000001209394_81175712' |




#language: ru
@tree

Функционал: Аптека ру

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий 

Сценарий: Подготовка данных

	// Документ.ЗаказКлиента

	И я проверяю или создаю для документа "ЗаказКлиента" объекты:
		| 'Ссылка'                                                                | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'НомерЗаказа'  | 'ДатаЗаказа'         | 'ФИО' | 'НомерТелефона' | 'Грузополучатель'                                                            | 'Контрагент'                                                             | 'СтатусДокумента'                      | 'СуммаДокумента' | 'КаналСбыта'                                        | 'ПлановаяДатаДоставки' | 'Комментарий'  | 'Ответственный'                                                           | 'КодКартыЛояльности' | 'Оплачено' | 'ТипЗаказа'                                | 'ДатаИзменения'       | 'SRLF' | 'SRLB' | 'АдресДоставки' | 'ПолученАптекой' | 'ДатаОкончанияРезерва' | 'ДатаРезерва'         | 'ДатаСозданияЗаказаНаСайте' | 'ПредельнаяДатаВыполнения' | 'СуммаОнлайнОплаты' | 'КодСлужбыДоставки' | 'КлиентскаяСтоимостьДоставки' | 'ПолнаяСтоимостьДоставки' | 'ДатаУпаковки'        | 'КомментарийСпециалиста' | 'ДатаОнлайнЧека'     | 'НомерОнлайнЧека' | 'КодСотрудникаФармакопейка' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80f8e0db550a29d511efff3be913f467' | 'False'           | '00009475535' | '12.03.2025 18:17:13' | 'False'    | 'AM-226547138' | '12.03.2025 0:00:00' | ''    | ''              | 'e1cib/data/Справочник.Грузополучатели?ref=80e9c81f66ea90e211e757f9ec4fb3c7' | 'e1cib/data/Справочник.Контрагенты?ref=80e9c81f66ea90e211e75a2dbc9d752d' | 'Enum.СтатусыЗаказовКлиентов.Завершен' | 1109             | 'e1cib/data/Справочник.КаналСбыта?refName=APTEKARU' | '01.01.0001 0:00:00'   | '+79618820234' | 'e1cib/data/Справочник.Пользователи?ref=80cce0db55014f2711e81473bf81ef05' | ''                   | 'False'    | 'Enum.ТипыЗаказовКлиентов.ДоставкаВАптеку' | '14.03.2025 15:52:28' |        |        | ''              | 'True'           | '21.03.2025 15:00:08'  | '13.03.2025 14:58:42' | '01.01.0001 0:00:00'        | '01.01.0001 0:00:00'       |                     | ''                  |                               |                           | '13.03.2025 14:58:42' | ''                       | '01.01.0001 0:00:00' | ''                | ''                          |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                | 'НоменклатураВнешняя'                                                            | 'ЦенаПоставщика' | 'Цена' | 'ЦенаСоСкидкой' | 'Количество' | 'Сумма' | 'Отменено' | 'ПричинаОтмены' | 'ИсходнаяХарактеристика' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80f8e0db550a29d511efff3be913f467' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80e8e0db550a29d511eb391935a94568' | 259.11           | 277.25 |                 | 4            | 1109    | 'False'    | ''              | ''                       |

	// Документ.ЗаказПоставщику

	И я проверяю или создаю для документа "ЗаказПоставщику" объекты:
		| 'Ссылка'                                                                   | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'Грузополучатель'                                                            | 'ДокументОснование'                                                     | 'Комментарий'  | 'Контрагент'                                                             | 'Ответственный'                                                           | 'СтатусДокумента'                        | 'СуммаДокумента' | 'КоличествоПозиций' | 'НеУчитыватьКакТоварВПути' | 'Срочность' | 'ИсточникСоздания'                  | 'ЗаказПоСрочнымАвтоТоргам' | 'ЛогистическийКанал'                                                             |
		| 'e1cib/data/Документ.ЗаказПоставщику?ref=80f8e0db550a29d511efff3be913f468' | 'False'           | '00013981067' | '12.03.2025 18:17:13' | 'False'    | 'e1cib/data/Справочник.Грузополучатели?ref=80e9c81f66ea90e211e757f9ec4fb3c7' | 'e1cib/data/Документ.ЗаказКлиента?ref=80f8e0db550a29d511efff3be913f467' | '+79618820234' | 'e1cib/data/Справочник.Контрагенты?ref=80e9c81f66ea90e211e75a2dbc9d752d' | 'e1cib/data/Справочник.Пользователи?ref=827a60a44ca9af5711e74a7309e102f8' | 'Enum.СтатусыЗаказов.ПолученПоставщиком' | 1036.44          | 1                   | 'True'                     | ''          | 'Enum.ИсточникСоздания.РучныеТорги' | 'False'                    | 'e1cib/data/Справочник.ЛогистическиеКаналы?ref=80f4e0db550a29d511eebe67ae533143' |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                   | 'КодТовара_Удалить' | 'Наименование_Удалить' | 'Производитель_Удалить' | 'Штрихкод_Удалить' | 'Номенклатура'                                                            | 'НоменклатураВнешняя'                                                            | 'Цена' | 'Количество' | 'Сумма' | 'Фасовка' | 'СрокГодности'       | 'ДатаИзготовления'   | 'Комментарий' | 'ЗаказКлиента' |
		| 'e1cib/data/Документ.ЗаказПоставщику?ref=80f8e0db550a29d511efff3be913f468' | ''                  | ''                     | ''                      | ''                 | 'e1cib/data/Справочник.Номенклатура?ref=80f6e0db550a29d411ef0b939786d0ed' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80e8e0db550a29d511eb391935a94568' | 259.11 | 4            | 1036.44 |           | '01.01.0001 0:00:00' | '01.01.0001 0:00:00' | ''            | ''             |

#language: ru
@tree

Функционал: www резерв

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Подготовка данных

	// РегистрСведений.СоставДанныхПакетовОбменаАОД

	И я проверяю или создаю для регистра сведений "СоставДанныхПакетовОбменаАОД" записи:
		| 'ПакетОбмена'                                                                | 'НомерСтрокиСостава' | 'Объект'                                                                | 'ОбъектТекстПакета'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 'Статус'                                     | 'ОписаниеОшибки' | 'ОбразЭЦП'                              | 'ОбразОбъекта'                          |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef6dedb7345d47' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | '{\n  "id": 6647078,\n  "status_id": 0,\n  "sales_chanel": "000000002",\n  "srlf": 1,\n  "srlb": 0,\n  "type": "reservation",\n  "fio": "Анастасия",\n  "phone": "+7(913)656-40-82",\n  "bonus_card": null,\n  "create_date": "2024-09-08T20:21:25+06:00",\n  "shop_id": 38300206,\n  "deadline": "2024-09-11T20:21:25+06:00",\n  "additional_info": "",\n  "items": [\n    {\n      "sku": "3008116",\n      "serial_number": "2000001984772_38300206",\n      "expiration_date": "2028-12-08",\n      "purchase_price": 320.32,\n      "discount_price": null,\n      "retail_price": 369,\n      "quantity": 1,\n      "gift_of_product": 1273257\n    }\n  ],\n  "unload_time": "2024-09-08T20:22:03+06:00",\n  "sender": "web"\n}' | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef6dee46269d36' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | '{"id":"6647078","status_id":{"Порядок":1,"Значение":"Подтвержден"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":2,"reserve_end_date":"2024-09-11T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef7c833c3364b9' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | '{"id":"6647078","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":4,"reserve_end_date":"2024-09-30T09:47:25"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef7c84c5d40c5c' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | '{"id":"6647078","status_id":{"Порядок":5,"Значение":"ГотовКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":6,"reserve_end_date":"2024-09-30T09:58:03"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |

	// Документ.ЗаказКлиента

	И я проверяю или создаю для документа "ЗаказКлиента" объекты:
		| 'Ссылка'                                                                | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'НомерЗаказа' | 'ДатаЗаказа'          | 'ФИО'       | 'НомерТелефона' | 'Грузополучатель'                                                            | 'Контрагент'                                                             | 'СтатусДокумента'                          | 'СуммаДокумента' | 'КаналСбыта'                                   | 'ПлановаяДатаДоставки' | 'Комментарий' | 'Ответственный'                                                           | 'КодКартыЛояльности' | 'Оплачено' | 'ТипЗаказа'                              | 'ДатаИзменения'      | 'SRLF' | 'SRLB' | 'АдресДоставки' | 'ПолученАптекой' | 'ДатаОкончанияРезерва' | 'ДатаРезерва'        | 'ДатаСозданияЗаказаНаСайте' | 'ПредельнаяДатаВыполнения' | 'СуммаОнлайнОплаты' | 'КодСлужбыДоставки' | 'КлиентскаяСтоимостьДоставки' | 'ПолнаяСтоимостьДоставки' | 'ДатаУпаковки'       | 'КомментарийСпециалиста' | 'ДатаОнлайнЧека'     | 'НомерОнлайнЧека' | 'КодСотрудникаФармакопейка' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | 'False'           | '13006729758' | '08.09.2024 20:24:05' | 'False'    | '6647078'     | '08.09.2024 20:22:03' | 'Анастасия' | '7(913)6564082' | 'e1cib/data/Справочник.Грузополучатели?ref=80e9c81f66ea90e211e757f9ec4fb3c7' | 'e1cib/data/Справочник.Контрагенты?ref=80e9c81f66ea90e211e75584df30bf92' | 'Enum.СтатусыЗаказовКлиентов.ГотовКВыдаче' | 369              | 'e1cib/data/Справочник.КаналСбыта?refName=WWW' | '01.01.0001 0:00:00'   | ''            | 'e1cib/data/Справочник.Пользователи?ref=80cce0db55014f2711e81473bf81ef05' | ''                   | 'False'    | 'Enum.ТипыЗаказовКлиентов.РезервВАптеке' | '27.09.2024 9:58:03' | 1      | 6      | ''              | 'True'           | '30.09.2024 9:58:03'   | '27.09.2024 9:47:25' | '08.09.2024 20:21:25'       | '11.09.2024 20:21:25'      |                     | ''                  |                               |                           | '27.09.2024 9:55:08' | ''                       | '01.01.0001 0:00:00' | ''                | ''                          |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                | 'НоменклатураВнешняя'                                                            | 'ЦенаПоставщика' | 'Цена' | 'ЦенаСоСкидкой' | 'Количество' | 'Сумма' | 'Отменено' | 'ПричинаОтмены' | 'ИсходнаяХарактеристика' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6dedfe570c03' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80d3e0db550a29d511e8a623a7105c67' | 320.32           | 369    |                 | 1            | 369     | 'False'    | ''              | '2000001984772_38300206' |

#language: ru
@tree

Функционал: www доставка

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Подготовка данных

	// РегистрСведений.СоставДанныхПакетовОбменаАОД

	И я проверяю или создаю для регистра сведений "СоставДанныхПакетовОбменаАОД" записи:
		| 'ПакетОбмена'                                                                | 'НомерСтрокиСостава' | 'Объект'                                                                | 'ОбъектТекстПакета'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 'Статус'                                     | 'ОписаниеОшибки' | 'ОбразЭЦП'                              | 'ОбразОбъекта'                          |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef6c1bf59f75b1' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6c1c3d6ad76e' | '{\n  "id": 6639283,\n  "status_id": 0,\n  "sales_chanel": "000000002",\n  "srlf": 1,\n  "srlb": 0,\n  "type": "delivery_to_shop",\n  "fio": "Мария",\n  "phone": "+7(953)792-36-00",\n  "bonus_card": null,\n  "create_date": "2024-09-06T12:45:59+06:00",\n  "shop_id": 38300206,\n  "deadline": "2024-09-12T11:30:00+06:00",\n  "additional_info": "",\n  "items": [\n    {\n      "sku": "3190882",\n      "serial_number": "1533",\n      "expiration_date": "2026-02-09",\n      "purchase_price": 30.5,\n      "discount_price": null,\n      "retail_price": 51,\n      "quantity": 5,\n      "gift_of_product": 1340990\n    }\n  ],\n  "stock_id": 38300000,\n  "unload_time": "2024-09-06T12:48:02+06:00",\n  "sender": "web"\n}' | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef6c1c84a9e100' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6c1c3d6ad76e' | '{"id":"6639283","status_id":{"Порядок":1,"Значение":"Подтвержден"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":2,"reserve_end_date":"2024-09-09T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |

	// Документ.ЗаказКлиента

	И я проверяю или создаю для документа "ЗаказКлиента" объекты:
		| 'Ссылка'                                                                | 'ПометкаУдаления' | 'Номер'       | 'Дата'                | 'Проведен' | 'НомерЗаказа' | 'ДатаЗаказа'          | 'ФИО'   | 'НомерТелефона' | 'Грузополучатель'                                                            | 'Контрагент'                                                             | 'СтатусДокумента'                         | 'СуммаДокумента' | 'КаналСбыта'                                   | 'ПлановаяДатаДоставки' | 'Комментарий' | 'Ответственный'                                                           | 'КодКартыЛояльности' | 'Оплачено' | 'ТипЗаказа'                                | 'ДатаИзменения'       | 'SRLF' | 'SRLB' | 'АдресДоставки' | 'ПолученАптекой' | 'ДатаОкончанияРезерва' | 'ДатаРезерва'        | 'ДатаСозданияЗаказаНаСайте' | 'ПредельнаяДатаВыполнения' | 'СуммаОнлайнОплаты' | 'КодСлужбыДоставки' | 'КлиентскаяСтоимостьДоставки' | 'ПолнаяСтоимостьДоставки' | 'ДатаУпаковки'       | 'КомментарийСпециалиста' | 'ДатаОнлайнЧека'     | 'НомерОнлайнЧека' | 'КодСотрудникаФармакопейка' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6c1c3d6ad76e' | 'False'           | '13006725272' | '06.09.2024 12:50:07' | 'False'    | '6639283'     | '06.09.2024 12:48:02' | 'Мария' | '7(953)7923600' | 'e1cib/data/Справочник.Грузополучатели?ref=80e9c81f66ea90e211e757f9ec4fb3c7' | 'e1cib/data/Справочник.Контрагенты?ref=80d3e0db550a29d511e8f15d02965c27' | 'Enum.СтатусыЗаказовКлиентов.Подтвержден' | 255              | 'e1cib/data/Справочник.КаналСбыта?refName=WWW' | '01.01.0001 0:00:00'   | ''            | 'e1cib/data/Справочник.Пользователи?ref=827a60a44ca9af5711e74a7309e102f8' | ''                   | 'False'    | 'Enum.ТипыЗаказовКлиентов.ДоставкаВАптеку' | '06.09.2024 12:50:07' | 1      | 2      | ''              | 'False'          | '01.01.0001 0:00:00'   | '01.01.0001 0:00:00' | '06.09.2024 12:45:59'       | '12.09.2024 11:30:00'      |                     | ''                  |                               |                           | '01.01.0001 0:00:00' | ''                       | '01.01.0001 0:00:00' | ''                | ''                          |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                | 'НоменклатураВнешняя'                                                            | 'ЦенаПоставщика' | 'Цена' | 'ЦенаСоСкидкой' | 'Количество' | 'Сумма' | 'Отменено' | 'ПричинаОтмены' | 'ИсходнаяХарактеристика' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6c1c3d6ad76e' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80cbc6ce5682ae8b11eee0343c1fba5c' | 30.5             | 51     |                 | 5            | 255     | 'False'    | ''              | '1533'                   |


#language: ru
@tree

Функционал: Доставка клиенту
Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Подготовка данных

	// РегистрСведений.ОчередьОтправкиЗаказов

	И я проверяю или создаю для регистра сведений "ОчередьОтправкиЗаказов" записи:
		| 'ЗаказКлиента'                                                          | 'SRLB' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | 1      |

	// РегистрСведений.СоставДанныхПакетовОбменаАОД

	И я проверяю или создаю для регистра сведений "СоставДанныхПакетовОбменаАОД" записи:
		| 'ПакетОбмена'                                                                | 'НомерСтрокиСостава' | 'Объект'                                                                | 'ОбъектТекстПакета'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 'Статус'                                     | 'ОписаниеОшибки' | 'ОбразЭЦП'                              | 'ОбразОбъекта'                          |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef6e6669b11370' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{\n  "id": 6648396,\n  "status_id": 0,\n  "sales_chanel": "000000003",\n  "srlf": 1,\n  "srlb": 0,\n  "type": "reservation",\n  "fio": "Наталья Гурчева ",\n  "phone": "+7(923)750-08-12",\n  "bonus_card": null,\n  "create_date": "2024-09-09T10:45:05+06:00",\n  "shop_id": 81174654,\n  "deadline": "2024-09-12T10:45:05+06:00",\n  "additional_info": "",\n  "items": [\n    {\n      "sku": "3084439",\n      "serial_number": "2000004510541_81174654",\n      "expiration_date": "2025-05-31",\n      "purchase_price": 3791.64,\n      "discount_price": 3871.5,\n      "retail_price": 3871.6,\n      "quantity": 1,\n      "gift_of_product": 1281894\n    }\n  ],\n  "unload_time": "2024-09-09T10:46:05+06:00",\n  "sender": "web"\n}' | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef8231608a9c05' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":3,"Значение":"ОтправленПоставщику"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":3,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef82317c18130d' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":3,"Значение":"ОтправленПоставщику"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":5,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef8231f1b23426' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":5,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef823238d09d0f' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":4,"Значение":"ОтгруженПоставщиком"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":7,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef82325671b3f1' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":4,"Значение":"ОтгруженПоставщиком"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":9,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef8232b06bbfd8' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":9,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef8232ca4766e2' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000060","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":11,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef846fc14ce649' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000061","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":13,"reserve_end_date":"2024-10-07T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef855a1b5133bc' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":15,"reserve_end_date":"2024-10-11T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef855aba1c3472' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":4,"Значение":"ОтгруженПоставщиком"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":17,"reserve_end_date":"2024-10-11T23:59:59"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d7c6ce5682ae8b11ef855ad64f13d7' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":8,"Значение":"ПодготовкаКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":19,"reserve_end_date":"2024-10-11T15:51:05"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d8c6ce5682ae8b11ef85e60bc5a64e' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":5,"Значение":"ГотовКВыдаче"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":21,"reserve_end_date":"2024-10-12T08:27:36"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d8c6ce5682ae8b11ef85ec8622c244' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":9,"Значение":"ВДоставке"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":23,"reserve_end_date":"2024-10-12T08:27:36"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |
		| 'e1cib/data/Справочник.ПакетыОбменаАОД?ref=80d8c6ce5682ae8b11ef85ee03ad3246' | 1                    | 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | '{"id":"10000000062","status_id":{"Порядок":7,"Значение":"Завершен"},"sales_chanel":{"Код":"000000002","Наименование":"WWW"},"SRLF":1,"SRLB":25,"reserve_end_date":"2024-10-12T08:27:36"}'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 'Enum.СтатусыОбработкиОбъектовАОД.Обработан' | ''               | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' | 'ValueStorage:AQEIAAAAAAAAAO+7v3siVSJ9' |

	// Документ.ЗаказКлиента

	И я проверяю или создаю для документа "ЗаказКлиента" объекты:
		| 'Ссылка'                                                                | 'ПометкаУдаления' | 'Номер'       | 'Дата'               | 'Проведен' | 'НомерЗаказа' | 'ДатаЗаказа'         | 'ФИО'      | 'НомерТелефона' | 'Грузополучатель'                                                            | 'Контрагент'                                                             | 'СтатусДокумента'                      | 'СуммаДокумента' | 'КаналСбыта'                                   | 'ПлановаяДатаДоставки' | 'Комментарий'      | 'Ответственный'                                                           | 'КодКартыЛояльности' | 'Оплачено' | 'ТипЗаказа'                                       | 'ДатаИзменения'      | 'SRLF' | 'SRLB' | 'АдресДоставки' | 'ПолученАптекой' | 'ДатаОкончанияРезерва' | 'ДатаРезерва'         | 'ДатаСозданияЗаказаНаСайте' | 'ПредельнаяДатаВыполнения' | 'СуммаОнлайнОплаты' | 'КодСлужбыДоставки' | 'КлиентскаяСтоимостьДоставки' | 'ПолнаяСтоимостьДоставки' | 'ДатаУпаковки'        | 'КомментарийСпециалиста' | 'ДатаОнлайнЧека'     | 'НомерОнлайнЧека' | 'КодСотрудникаФармакопейка' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | 'False'           | '10000000062' | '08.10.2024 0:00:00' | 'False'    | '10000000062' | '08.10.2024 0:00:00' | 'Михалков' | '7(923)7500812' | 'e1cib/data/Справочник.Грузополучатели?ref=80e9c81f66ea90e211e757f9ec4fb3c7' | 'e1cib/data/Справочник.Контрагенты?ref=80e9c81f66ea90e211e75584df30bf92' | 'Enum.СтатусыЗаказовКлиентов.Завершен' | 10               | 'e1cib/data/Справочник.КаналСбыта?refName=WWW' | '08.10.2024 17:00:00'  | 'проверка выбытия' | 'e1cib/data/Справочник.Пользователи?ref=80f0e0db550a29d411ee067532561e20' | '9999000000022'      | 'True'     | 'Enum.ТипыЗаказовКлиентов.ДоставкаКлиентуСАптеки' | '09.10.2024 9:24:39' | 1      | 25     | 'ОФИС'          | 'True'           | '12.10.2024 8:27:36'   | '08.10.2024 15:51:05' | '08.10.2024 0:00:00'        | '04.11.2024 0:00:00'       | 10                  | '81174821'          |                               | 1                         | '08.10.2024 16:22:59' | ''                       | '04.10.2024 0:00:00' | '777889'          | ''                          |

	И я перезаполняю для объекта табличную часть "Товары":
		| 'Ссылка'                                                                | 'НоменклатураВнешняя'                                                            | 'ЦенаПоставщика' | 'Цена' | 'ЦенаСоСкидкой' | 'Количество' | 'Сумма' | 'Отменено' | 'ПричинаОтмены' | 'ИсходнаяХарактеристика' |
		| 'e1cib/data/Документ.ЗаказКлиента?ref=80d7c6ce5682ae8b11ef6e66fa8470cb' | 'e1cib/data/Справочник.НоменклатураВнешняя?ref=80ece0db550a29d411ecb59e5d7e8027' | 10               | 10     |                 | 1            | 10      | 'False'    | ''              | '2000001484265_38300206' |

